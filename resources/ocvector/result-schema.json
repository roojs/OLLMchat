{
  "type": "object",
  "properties": {
    "file-path": {
      "type": "string",
      "description": "Path to the source file"
    },
    "language": {
      "type": "string",
      "description": "Programming language identifier"
    },
    "summary": {
      "type": "string",
      "description": "One-paragraph summary of the file's purpose"
    },
    "imports": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "module": {"type": "string"},
          "line": {"type": "integer"}
        },
        "required": ["module", "line"]
      },
      "description": "Import/using/include statements"
    },
    "elements": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "property-type": {
            "type": "string",
            "enum": ["class", "function", "method", "property", "field", "struct", "interface", "enum", "namespace", "constructor", "delegate", "signal", "constant"],
            "description": "Type of code element"
          },
          "name": {
            "type": "string",
            "description": "Name of the element"
          },
          "access-modifier": {
            "type": "string",
            "enum": ["public", "private", "protected", "internal", "package", "default"],
            "description": "Visibility/access level"
          },
          "start-line": {
            "type": "integer",
            "minimum": 1,
            "description": "First line number (1-indexed)"
          },
          "end-line": {
            "type": "integer",
            "minimum": 1,
            "description": "Last line number (1-indexed)"
          },
          "signature": {
            "type": "string",
            "description": "Full declaration signature"
          },
          "description": {
            "type": "string",
            "description": "What the element does and its purpose"
          },
          "parameters": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "argument-type": {"type": "string"}
              },
              "required": ["name", "argument-type"]
            },
            "description": "Function/method parameters with types"
          },
          "return-type": {
            "type": "string",
            "description": "Return type (or 'void'/'None' for no return)"
          },
          "properties": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "value-type": {"type": "string"},
                "accessors": {
                  "type": "array",
                  "items": {"type": "string", "enum": ["get", "set", "init"]}
                }
              },
              "required": ["name", "value-type"]
            },
            "description": "Properties/fields for classes/structs"
          },
          "dependencies": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "relationship-type": {
                  "type": "string",
                  "enum": ["inherits", "implements", "uses", "calls", "references", "imports"]
                },
                "target": {"type": "string"}
              },
              "required": ["relationship-type", "target"]
            },
            "description": "Relationships to other code elements"
          }
        },
        "required": [
          "property-type",
          "name",
          "start-line",
          "end-line",
          "description",
          "access-modifier"
        ]
      }
    }
  },
  "required": [
    "file-path",
    "language",
    "summary",
    "elements"
  ]
}
