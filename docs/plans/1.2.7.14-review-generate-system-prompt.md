# 1.2.7.14. Review generate_system_prompt() Implementation

## Overview

`BaseAgent.generate_system_prompt()` only returns an empty string. Only `CodeAssistant.generate_system_prompt()` has a real implementation that builds a system prompt. This means the method is effectively only used by CodeAssistant, while other agents (like JustAsk) don't use it.

**Parent Plan**: [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md)

## Status

‚è≥ **TODO** - Cleanup phase after signal migration.

## Goal

Review and decide on the proper pattern for `generate_system_prompt()` method.

## Issue

`BaseAgent.generate_system_prompt()` only returns an empty string. Only `CodeAssistant.generate_system_prompt()` has a real implementation that builds a system prompt. This means the method is effectively only used by CodeAssistant, while other agents (like JustAsk) don't use it.

## Current State

- `BaseAgent.generate_system_prompt()` returns empty string (line 222-225 in BaseAgent.vala)
- `CodeAssistant.generate_system_prompt()` has a real implementation that builds complex system prompt with sections
- `JustAsk` doesn't override it, so it uses the base implementation (empty string)
- `AgentHandler.send_async()` calls `this.agent.generate_system_prompt()` and adds it to messages if not empty (line 190-193 in AgentHandler.vala)

## Questions to Resolve

- Should `generate_system_prompt()` be removed from base implementation if only CodeAssistant uses it?
- Or should other agents have meaningful implementations?
- Is there a better pattern for this (e.g., only CodeAssistant should call it, or it should be abstract/virtual with CodeAssistant override)?

## Action

Review and decide on the proper pattern for `generate_system_prompt()` during 1.2.7 cleanup. Either:
1. Make it abstract and require all agents to implement it (even if empty)
2. Remove it from base and only have CodeAssistant implement it
3. Keep current pattern but document that only CodeAssistant should override it
4. Refactor to a different pattern (e.g., `system_message()` method that receives handler context)

## Files to Modify

- `libollmchat/Prompt/BaseAgent.vala` - Review and potentially refactor `generate_system_prompt()`
- `liboccoder/Prompt/CodeAssistant.vala` - Review implementation

## Testing Checklist

- [ ] `generate_system_prompt()` pattern is resolved and documented
- [ ] All functionality still works correctly after cleanup

## Related Plans

- [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md) - Parent plan
- [1.2.7.8. Cleanup Items](./1.2.7.8-cleanup-items.md) - Related cleanup item

