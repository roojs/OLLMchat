# 2.20.5. Project-Level Summaries

## Status

⏳ **PENDING**

## Purpose

Generate detailed project descriptions including languages, build system, documentation locations, coding standards, and folder structure. This provides a high-level overview of what the project is about and where important files are located.

## Problem Statement

There's no high-level overview of what the project is about, what technologies it uses, or where important files are located.

## Project Metadata

### Storage

- Stored in `vector_metadata` table
- `element_type = 'project'`
- `file_id` references the project root folder's `FileBase.id`
- `start_line = 0` and `end_line = 0` (no line numbers)
- `vector_id = 0` (NOT stored in FAISS, not vectorized)
- `description` contains detailed project description (multi-line, not one-liner)
- `ast_path = ''` (projects don't have AST paths)

### Analysis Process

1. Query all folder descriptions from `vector_metadata`:
   ```sql
   SELECT element_name, description FROM vector_metadata 
   WHERE element_type = 'folder' AND file_id IN (SELECT id FROM filebase WHERE project_id = ?)
   ```
2. Collect project structure information:
   - Languages used (from file extensions or file metadata)
   - Build system (meson.build, CMakeLists.txt, package.json, etc.)
   - Documentation locations (docs/, README.md, etc.)
   - Plans location (if applicable)
   - Coding standards/rules locations (`.cursor/rules/`, `docs/standards/`, `CONTRIBUTING.md`, etc.)
   - Folder structure with descriptions
3. Call Analysis layer with project analysis prompt template
4. Generate detailed project description
5. Store in `vector_metadata` with `element_type='project'`

### Prompt Template

- New resource file: `resources/ocvector/project-prompt.txt`
- More detailed than folder prompt
- Input includes:
  - Project path
  - Languages detected
  - Build system detected
  - Documentation locations
  - Coding standards/rules locations (if found)
  - List of folders with descriptions
  - Overview of file types
- Output: detailed project description including:
  - What the project is about
  - Languages used
  - Build system
  - Where documentation is located
  - Where plans are located (if applicable)
  - Coding standards/rules that should be applied and where they are located (if found)
  - Overview of folder structure and what each does

## Coding Standards/Rules Detection

The project analysis should detect common locations for coding standards and rules:

1. **Common locations to check**:
   - `.cursor/rules/` directory (Cursor IDE rules)
   - `docs/standards/` or `docs/coding-standards/` directory
   - `CONTRIBUTING.md` file (often contains coding guidelines)
   - `.github/CONTRIBUTING.md` (GitHub contributing guidelines)
   - `docs/CONTRIBUTING.md`
   - `STYLE.md` or `STYLE_GUIDE.md`
   - `docs/STYLE.md` or `docs/STYLE_GUIDE.md`
   - Project-specific rules files (e.g., `docs/rules.md`, `RULES.md`)

2. **Detection logic**:
   - Scan project root and common documentation directories
   - Look for files matching patterns: `*STANDARD*`, `*RULES*`, `*STYLE*`, `CONTRIBUTING*`
   - Check for `.cursor/rules/` directory and list files within
   - Collect file paths where coding standards/rules are located

3. **Include in project analysis**:
   - List of files/directories containing coding standards
   - Brief description of what standards exist (if file names indicate)
   - Location paths for easy reference

## Implementation Details

### New Analysis Method

`Analysis.analyze_project()`:
- Takes project root `FileBase` object
- Queries all folder descriptions
- Detects languages, build system, documentation locations
- Detects coding standards/rules files (see detection logic above)
- Builds comprehensive prompt context
- Calls LLM with project prompt template
- Returns detailed project description
- Stores in `vector_metadata`

### Indexer Modifications

Add new method to `Indexer`:

`index_project()`:
- Called after `index_folders()` completes
- Gets project root folder
- Calls `Analysis.analyze_project()`
- Stores project metadata

### Updated Indexing Flow

```
index_filebase(folder, recurse, force):
  1. index_folder() → scans all files
  2. index_folders() → analyzes all folders (Phase 4)
  3. index_project() → analyzes project (NEW)
```

## Deliverables

- [ ] Create `resources/ocvector/project-prompt.txt` prompt template
- [ ] Implement project structure detection (languages, build system, documentation locations)
- [ ] Implement coding standards/rules detection logic
- [ ] Implement `Analysis.analyze_project()` method
- [ ] Add `Indexer.index_project()` method
- [ ] Integrate project analysis into indexing flow (after folder scanning)
- [ ] Store project metadata with `element_type='project'`
- [ ] Test project description generation
- [ ] Verify project metadata includes all required information
- [ ] Test coding standards detection

## Related Plans

- 2.20-codebase-scanner-improvements.md - Parent plan
- 2.20.4-folder-level-summaries.md - Folder summaries (required before project analysis)
- 4.7-rules-system.md - Rules system for coding standards (may integrate with project analysis)
- 2.10-codebase-search-tool.md - Existing codebase search infrastructure
