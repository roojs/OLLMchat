# 2.10. Codebase Search Tool

## Overview

Implementation of CodebaseSearchTool for semantic code search functionality using the existing VectorSearch infrastructure with FAISS.

## Status

‚è≥ **TODO** - To be implemented.

## Implementation Details

### Existing Infrastructure

The project already has a `VectorSearch/` directory with:
- **FAISS Integration** (`Index.vala`, `Database.vala`) - Vector search using FAISS
- **Code Analysis** (`CodeImport.vala`, `CodeIndexer.vala`) - Code file analysis
- **Code Search** (`CodeSearch.vala`) - Search functionality
- **Code Elements** (`CodeElement.vala`, `CodeFile.vala`) - Code structure representation

### Workflow

1. **Read Files** - Read code files from the codebase
2. **Send to LLM** - Send file content to LLM for analysis
3. **Get Markdown Summary** - LLM returns markdown summary of the file
4. **Generate Vectors** - Generate embedding vectors from the summary using LLM embedding API
5. **Insert into Database** - Store vectors in FAISS index

### SQL Database Requirements

Need an SQL database to store metadata for indexed files:
- **Vector positions** - Reference to vectors in FAISS index
- **File path** - Path to the indexed file
- **Current status** - Status of the file (indexed, needs update, etc.)
- **Timestamp** - When the file was last indexed/updated
- **File hash/checksum** - To detect when file has changed and needs re-indexing

This allows the system to:
- Track which files are indexed
- Know when to renew/update documentation for a file (when file changes)
- Maintain file status and metadata separate from vector storage

### Features
- Semantic code search using FAISS vectors
- Integration with existing VectorSearch infrastructure
- File change detection and re-indexing
- Permission question building

### Files
- `src/OLLMchat/Tools/CodebaseSearchTool.vala` (to be created)
- SQL database schema for file metadata
- Integration with `VectorSearch/` directory components

### Dependencies
- Existing `VectorSearch/` infrastructure
- FAISS library (already integrated)
- SQL database (SQLite via `libocsqlite`)

### Testing
- Test with various codebases
- Test file change detection
- Test re-indexing workflow
- Add to meson.build
