# 1.2.7.6. Remove Signals from Client

## Overview

Remove the three asynchronous signals (`stream_chunk`, `stream_start`, `tool_message`) from `Client` since all connections have been migrated to Chat.

**Parent Plan**: [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-DONE-move-signals-to-chat.md)

## Status

✅ **DONE** - Signals removed from Client. All signal connections now use Chat, and all references have been updated.

## Goal

Remove signal declarations and emissions from Client. All signal connections should now use Chat, and agent usage should use direct method calls.

## Prerequisites

- ✅ All signal connections migrated to Chat (Phase 3 complete)
- ✅ Agent usage uses direct method calls (Phase 2 complete)

## Implementation Steps

### Step 5.1: Remove Signal Declarations from Client

**Goal**: Remove signal declarations from Client.

**Prerequisite**: ✅ All signal connections migrated to Chat (Phase 3 complete) and ✅ agent usage uses direct method calls (Phase 2 complete)

**Changes**:
1. Remove from `libollmchat/Client.vala`:
   ```vala
   // Remove these:
   public signal void stream_chunk(string new_text, bool is_thinking, Response.Chat response);
   public signal void stream_start();
   public signal void tool_message(Message message);
   ```

**Result**: Signals are completely removed from Client, code still works (all connections use Chat)

### Step 5.2: Remove Signal Emissions from Client

**Goal**: Remove all signal emissions from Client.

**Prerequisite**: ✅ All signal declarations removed (Step 5.1 complete)

**Changes**:
1. Find all `client.stream_chunk()` calls and remove
2. Find all `client.stream_start()` calls and remove
3. Find all `client.tool_message()` calls and remove

**Files**:
- `libollmchat/Client.vala` - Remove signal emissions
- `libollmchat/Call/Base.vala` - Remove Client signal emissions (Chat emits instead)
- `libollmchat/Call/Chat.vala` - Remove Client signal emissions (Chat emits instead)

**Result**: Client no longer emits signals, Chat handles all signal emissions

## Files to Modify

- `libollmchat/Client.vala` - Remove signal declarations and emissions
- `libollmchat/Call/Base.vala` - Remove Client signal emissions
- `libollmchat/Call/Chat.vala` - Remove Client signal emissions

## Testing Checklist

- [x] Client no longer has signal declarations
- [x] Client no longer emits signals
- [x] All functionality still works correctly
- [x] Streaming still works correctly for agent usage
- [x] Streaming still works correctly for non-agent usage
- [x] Tool messages still work correctly
- [x] UI updates correctly when streaming starts

## Related Plans

- [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-DONE-move-signals-to-chat.md) - Parent plan
- [1.2.7.5. Rename exec_chat() to send()](./1.2.7.5-DONE-rename-exec-chat-to-send.md) - Previous phase
- [1.2.7.7. Remove Client from Session](./1.2.7.7-DONE-remove-client-from-session.md) - Next phase
- [1.2. Refactor Client and Chat Relationship](./1.2-refactor-client-chat-relationship.md) - Grandparent plan

