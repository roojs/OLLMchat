# 1.4.1. Bootstrap Empty Server

## Overview

Handle the case where a new server might not have any models installed yet. This should be part of the bootstrap/initial setup flow.

**Parent Plan**: [1.4. Client Configuration Setup](../1.4-DONE-client-configuration-setup.md)

## Status

✅ **DONE** - Handle empty servers during bootstrap.

## Goal

When a new server is set up (or a server has no models), provide a way to:
1. Detect that the server has no models
2. Guide the user to pull/install models
3. Allow the user to select a model to use as default_model

## Current State

- `Manager.ensure_model_usage()` verifies that default_model exists and throws an error if it doesn't
- Bootstrap dialog currently only verifies connection (version check)
- No handling for servers with no models

## Implementation

### Detection

When `Manager.ensure_model_usage()` fails because the model doesn't exist, we need to check if:
- The server has no models at all (empty server)
- The server has models but not the one specified in default_model

### Bootstrap Flow for Empty Server

1. **Connection Verified**: Bootstrap dialog verifies connection (version check) ✅
2. **Model Check**: After Manager creation, `ensure_model_usage()` is called
3. **Empty Server Detection**: If verification fails, check if server has any models
4. **User Guidance**: 
   - If server is empty: Show dialog to pull a model
   - If server has models but not default_model: Show dialog to select from available models
5. **Model Selection/Pull**: Allow user to:
   - Pull a model from the server
   - Select an existing model as default_model
6. **Update Config**: Save the selected model as default_model

## Related Plans

- [1.4. Client Configuration Setup](../1.4-DONE-client-configuration-setup.md) - Parent plan
- [1.3.4. Pulling Models](1.3.4-DONE-pulling-models.md) - Model pulling functionality
