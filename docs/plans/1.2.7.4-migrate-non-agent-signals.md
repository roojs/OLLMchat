# 1.2.7.4. Migrate Non-Agent Signal Connections

## Overview

Update code that uses Chat signals (for non-agent usage) to connect to Chat instead of Client. This completes the migration of signal connections from Client to Chat.

**Parent Plan**: [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md)

## Status

‚è≥ **TODO** - Third phase of signal migration.

## Goal

Update all non-agent signal connections to use Chat signals instead of Client signals. Client signals will still exist for backward compatibility during the transition.

## Implementation Steps

### Step 3.1: Update Non-Agent Signal Connections

**Goal**: Update code that uses Chat signals (for non-agent usage) to connect to Chat instead of Client.

**Files to check**:
- `libollmchatgtk/ChatWidget.vala` - May connect to Chat signals for non-agent usage
- `libollmchatgtk/ChatView.vala` - May connect to Chat signals for non-agent usage
- Any other UI or handler code that doesn't use agents

**For each connection**:
1. Find `client.stream_chunk.connect(...)` and change to `chat.stream_chunk.connect(...)`
2. Find `client.stream_start.connect(...)` and change to `chat.stream_start.connect(...)`
3. Find `client.tool_message.connect(...)` and change to `chat.tool_message.connect(...)`

**Result**: Non-agent code connects to Chat signals, but Client signals still exist (for backward compatibility)

## Files to Modify

- `libollmchatgtk/ChatWidget.vala` - Update signal connections to use Chat
- `libollmchatgtk/ChatView.vala` - Update signal connections to use Chat
- Any other UI or handler code that doesn't use agents

## Testing Checklist

- [ ] All non-agent code connects to Chat signals (not Client signals)
- [ ] Streaming still works correctly for non-agent usage
- [ ] Tool messages still work correctly for non-agent usage
- [ ] UI updates correctly when streaming starts for non-agent usage
- [ ] Client signals still exist (for backward compatibility during transition)

## Related Plans

- [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md) - Parent plan
- [1.2.7.3. Update Agent Usage to Direct Method Calls](./1.2.7.3-update-agent-usage-direct-calls.md) - Previous phase
- [1.2.7.5. Rename exec_chat() to send()](./1.2.7.5-rename-exec-chat-to-send.md) - Next phase
- [1.2. Refactor Client and Chat Relationship](./1.2-refactor-client-chat-relationship.md) - Grandparent plan

