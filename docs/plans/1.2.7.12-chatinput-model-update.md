# 1.2.7.12. ChatInput Model Update - Propagate to Chat Instance

## Overview

When the model is changed in `ChatInput`, it calls `session.activate_model()`, but there's a FIXME about whether `session.agent.chat.model` also needs to be updated.

**Parent Plan**: [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md)

## Status

‚è≥ **TODO** - Cleanup phase after signal migration.

## Goal

Ensure Chat instance is updated when model changes in UI, and remove outdated FIXME comments.

## Issue

When the model is changed in `ChatInput`, it calls `session.activate_model()`, but there's a FIXME about whether `session.agent.chat.model` also needs to be updated.

## Decision

Chat instance SHOULD be updated when model changes in UI. This is handled automatically by `Session.activate_model()` directly updating `agent.chat` properties (agent always exists - see Model and Options Setting Location section in 1.2.7.8).

## Current State

- `libollmchatgtk/ChatInput.vala` line 451 calls `this.manager.session.activate_model(model_usage)`
- `Session.activate_model()` updates `session.model_usage` but doesn't update Chat (needs fix)
- FIXME comment at line 44 is outdated (Chat is not created per request, it's created in AgentHandler constructor and reused)

## Action

- Remove outdated FIXME comment from `ChatInput.vala`
- Ensure `Session.activate_model()` directly updates `agent.chat` properties (agent always exists - handled in Model and Options Setting Location section in 1.2.7.8)

## Files to Modify

- `libollmchatgtk/ChatInput.vala` - Remove outdated FIXME comment (line 44)

## Testing Checklist

- [ ] Model updates in UI propagate correctly to Chat instances
- [ ] Outdated FIXME comment removed
- [ ] All functionality still works correctly after cleanup

## Related Plans

- [1.2.7. Move Remaining Signals from Client to Chat](./1.2.7-move-signals-to-chat.md) - Parent plan
- [1.2.7.8. Cleanup Items](./1.2.7.8-cleanup-items.md) - Related cleanup item

