<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>SQ.Query &ndash; ollmchat &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">SQ.Query &ndash; ollmchat Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">ollmchat</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace"><a href="SQ.html">SQ</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="class">Query</li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="creation_method"><a href="SQ.Query.Query.html">Query</a></li>
          <li class="creation_method"><a href="SQ.Query.Query.with_properties.html">Query.with_properties</a></li>
          <li class="method"><a href="SQ.Query.compareProperty.html">compareProperty</a></li>
          <li class="method"><a href="SQ.Query.deleteId.html">deleteId</a></li>
          <li class="method"><a href="SQ.Query.fetchAllInt64.html">fetchAllInt64</a></li>
          <li class="method"><a href="SQ.Query.fetchAllString.html">fetchAllString</a></li>
          <li class="method"><a href="SQ.Query.getColsExcept.html">getColsExcept</a></li>
          <li class="method"><a href="SQ.Query.getInt.html">getInt</a></li>
          <li class="method"><a href="SQ.Query.getText.html">getText</a></li>
          <li class="method"><a href="SQ.Query.insert.html">insert</a></li>
          <li class="method"><a href="SQ.Query.select.html">select</a></li>
          <li class="method"><a href="SQ.Query.selectExecute.html">selectExecute</a></li>
          <li class="method"><a href="SQ.Query.selectExecuteInto.html">selectExecuteInto</a></li>
          <li class="method"><a href="SQ.Query.selectPrepare.html">selectPrepare</a></li>
          <li class="method"><a href="SQ.Query.selectQuery.html">selectQuery</a></li>
          <li class="method"><a href="SQ.Query.select_async.html">select_async</a></li>
          <li class="method"><a href="SQ.Query.updateById.html">updateById</a></li>
          <li class="method"><a href="SQ.Query.updateOld.html">updateOld</a></li>
          <li class="field"><a href="SQ.Query.typekey.html">typekey</a></li>
          <li class="field"><a href="SQ.Query.typemap.html">typemap</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">Query</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Object Hierarchy:</h2>
        <img class="main_diagram" usemap="#SQ.Query" alt="Object hierarchy for Query" src="img/SQ.Query.png"/>

      <map id="SQ.Query" name="SQ.Query">
<area shape="rect" id="node1" href="SQ.Query.html" title="SQ.Query" alt="" coords="5,5,103,53"/>
</map>

        <h2 class="main_title">Description:</h2>
        <div class="main_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">class</span> <b><span class="class">Query</span></b>&lt;<b><span>T</span></b>&gt;
        </div>
        <div class="description">
          <p>A generic SQL query builder for GObject-based types.</p>
          <p>This class provides type-safe CRUD operations for GObject instances, automatically mapping object properties to database columns. It 
            supports INSERT, UPDATE, SELECT, and DELETE operations with automatic type conversion between GObject property types and SQLite column 
            types.</p>
          <p>Supported GObject property types: - boolean (maps to INTEGER 0/1) - int (maps to INTEGER) - int64 (maps to INT64) - string (maps to TEXT)
            - enum (maps to INTEGER)</p>
          <p>**Important:** SQ.Query only works with GObject properties. When deserializing from the database (SELECT operations), all properties 
            found in the result set will be set on the object. If a property is read-only (`get;` only), GObject will throw an error when attempting 
            to set it. Therefore, properties that appear in SELECT queries must be settable (`get; set;`).</p>
          <h2 class="main_title">Parameters:</h2>
          <table class="main_parameter_table">
            <tr class="main_parameter_table_unknown_parameter">
              <td class="main_parameter_table_name">T</td>
              <td>
                <p>The GObject type to work with </p>
              </td>
            </tr>
          </table>
        </div><br/>
        <div class="namespace_note"><b>Namespace:</b> <a href="SQ.html">SQ</a>
        </div>
        <div class="package_note"><b>Package:</b> <a href="index.htm">ollmchat</a>
        </div>
        <h2 class="main_title">Content:</h2>
        <h3 class="main_title">Creation methods:</h3>
        <ul class="navi_inline">
          <li class="creation_method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <b><a href="SQ.Query.Query.html" class="creation_method">Query</a></b> (<span class="main_type"><a href="SQ.Database.html" class="class">Database</a></span> db, <span class="main_basic_type"><span class="class">string</span></span> table)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Creates a new Query instance for the specified table.</span>
            </div></li>
          <li class="creation_method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <b><a href="SQ.Query.Query.with_properties.html" class="creation_method">Query.with_properties</a></b> (<span class="main_type"><a href="SQ.Database.html" class="class">Database</a></span> db, <span class="main_basic_type"><span class="class">string</span></span> table, <span class="main_basic_type"><span class="class">string</span></span>[] names, <span class="main_type"><span class="struct">Value</span></span>[] values)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Creates a new Query instance with property initialization.</span>
            </div></li>
        </ul>
        <h3 class="main_title">Methods:</h3>
        <ul class="navi_inline">
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="struct">bool</span></span> <b><a href="SQ.Query.compareProperty.html" class="method">compareProperty</a></b> (<span class="main_type"><span>T</span></span> older, <span class="main_type"><span>T</span></span> newer, <span class="main_basic_type"><span class="class">string</span></span> prop, <span class="main_type"><span class="struct">Type</span></span> gtype)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Compares a property value between two objects.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.deleteId.html" class="method">deleteId</a></b> (<span class="main_basic_type"><span class="struct">int64</span></span> id)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Deletes a row from the table by ID.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_basic_type"><span class="struct">int</span></span>&gt; <b><a href="SQ.Query.fetchAllInt64.html" class="method">fetchAllInt64</a></b> (<span class="main_type"><span class="class">Statement</span></span> stmt)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Fetches all integer values from the first column of a query result.
              </span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_basic_type"><span class="class">string</span></span>&gt; <b><a href="SQ.Query.fetchAllString.html" class="method">fetchAllString</a></b> (<span class="main_type"><span class="class">Statement</span></span> stmt)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Fetches all string values from the first column of a query result.
              </span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="class">string</span></span>[] <b><a href="SQ.Query.getColsExcept.html" class="method">getColsExcept</a></b> (<span class="main_basic_type"><span class="class">string</span></span>[]? except, <span class="main_basic_type"><span class="class">string</span></span> prefix = <span class="main_literal">""</span>)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Gets a list of column names, optionally excluding some and adding a 
                prefix.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="struct">int</span></span> <b><a href="SQ.Query.getInt.html" class="method">getInt</a></b> (<span class="main_type"><span>T</span></span> obj, <span class="main_basic_type"><span class="class">string</span></span> prop, <span class="main_type"><span class="struct">Type</span></span> gtype)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Extracts an integer value from an object property.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="class">string</span></span> <b><a href="SQ.Query.getText.html" class="method">getText</a></b> (<span class="main_type"><span>T</span></span> obj, <span class="main_basic_type"><span class="class">string</span></span> prop, <span class="main_type"><span class="struct">Type</span></span> gtype)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Extracts a text value from an object property.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="struct">int64</span></span> <b><a href="SQ.Query.insert.html" class="method">insert</a></b> (<span class="main_type"><span>T</span></span> newer)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Inserts a new object into the database table.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.select.html" class="method">select</a></b> (<span class="main_basic_type"><span class="class">string</span></span> where, <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_type"><span>T</span></span>&gt; ret)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Selects objects from the table matching a WHERE clause.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.selectExecute.html" class="method">selectExecute</a></b> (<span class="main_type"><span class="class">Statement</span></span> stmt, <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_type"><span>T</span></span>&gt; ret)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Executes a prepared SELECT statement and populates a result list.
              </span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="struct">bool</span></span> <b><a href="SQ.Query.selectExecuteInto.html" class="method">selectExecuteInto</a></b> (<span class="main_type"><span class="class">Statement</span></span> stmt, <span class="main_type"><span>T</span></span> row)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Executes a prepared SELECT statement and populates a single object.
              </span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><span class="class">Statement</span></span> <b><a href="SQ.Query.selectPrepare.html" class="method">selectPrepare</a></b> (<span class="main_basic_type"><span class="class">string</span></span> q)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Prepares a SQL SELECT statement for execution.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.selectQuery.html" class="method">selectQuery</a></b> (<span class="main_basic_type"><span class="class">string</span></span> q, <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_type"><span>T</span></span>&gt; ret)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Executes a raw SQL SELECT query and populates a result list.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">async</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.select_async.html" class="method">select_async</a></b> (<span class="main_basic_type"><span class="class">string</span></span> where, <span class="main_type"><span class="class">ArrayList</span></span>&lt;<span class="main_type"><span>T</span></span>&gt; ret) <span class="main_keyword">throws</span> <span class="main_type"><span class="errordomain">ThreadError</span></span>
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Selects objects from the table matching a WHERE clause asynchronously.
              </span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.updateById.html" class="method">updateById</a></b> (<span class="main_type"><span>T</span></span> newer)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Updates an existing object in the database by ID.</span>
            </div></li>
          <li class="method"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_keyword">void</span> <b><a href="SQ.Query.updateOld.html" class="method">updateOld</a></b> (<span class="main_type"><span>T</span></span> old, <span class="main_type"><span>T</span></span> newer)
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Updates an existing object in the database, only changing modified 
                fields.</span>
            </div></li>
        </ul>
        <h3 class="main_title">Fields:</h3>
        <ul class="navi_inline">
          <li class="field"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_basic_type"><span class="class">string</span></span>? <b><a href="SQ.Query.typekey.html" class="field">typekey</a></b>
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Column name that contains the type identifier for polymorphic 
                deserialization.</span>
            </div></li>
          <li class="field"><span class="leaf_code_definition"><span class="main_keyword">public</span> <span class="main_type"><span class="class">HashMap</span></span>&lt;<span class="main_basic_type"><span class="class">string</span></span>,<span class="main_type"><span class="struct">Type</span></span>&gt;? <b><a href="SQ.Query.typemap.html" class="field">typemap</a></b>
            </span>
            <div class="leaf_brief_description"><span class="brief_description">Typemap for polymorphic deserialization.</span>
            </div></li>
        </ul>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="https://docs.vala.dev"><kbd>valadoc</kbd></a>
    </div>
  </body>
</html>