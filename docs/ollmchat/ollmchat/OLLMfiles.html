<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>OLLMfiles &ndash; ollmchat &ndash; Vala Binding Reference</title>
    <link href="../style.css" rel="stylesheet" type="text/css"/><script src="../scripts.js" type="text/javascript">
    </script>
  </head>
  <body>
    <div class="site_header">OLLMfiles &ndash; ollmchat Reference Manual</div>
    <div class="site_body">
      <div class="site_navigation">
        <ul class="navi_main">
          <li class="package_index"><a href="../index.html">Packages</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="package"><a href="index.htm">ollmchat</a></li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace">OLLMfiles</li>
        </ul>
        <hr class="navi_hr"/>
        <ul class="navi_main">
          <li class="namespace"><a href="OLLMfiles.Diff.html">Diff</a></li>
          <li class="interface"><a href="OLLMfiles.FileBuffer.html">FileBuffer</a></li>
          <li class="class"><a href="OLLMfiles.BufferProviderBase.html">BufferProviderBase</a></li>
          <li class="class"><a href="OLLMfiles.DummyFileBuffer.html">DummyFileBuffer</a></li>
          <li class="class"><a href="OLLMfiles.File.html">File</a></li>
          <li class="class"><a href="OLLMfiles.FileAlias.html">FileAlias</a></li>
          <li class="abstract_class"><a href="OLLMfiles.FileBase.html">FileBase</a></li>
          <li class="class"><a href="OLLMfiles.FileChange.html">FileChange</a></li>
          <li class="class"><a href="OLLMfiles.Folder.html">Folder</a></li>
          <li class="class"><a href="OLLMfiles.FolderFiles.html">FolderFiles</a></li>
          <li class="class"><a href="OLLMfiles.GitProviderBase.html">GitProviderBase</a></li>
          <li class="class"><a href="OLLMfiles.NamespaceDoc.html">NamespaceDoc</a></li>
          <li class="class"><a href="OLLMfiles.ProjectFile.html">ProjectFile</a></li>
          <li class="class"><a href="OLLMfiles.ProjectFiles.html">ProjectFiles</a></li>
          <li class="class"><a href="OLLMfiles.ProjectList.html">ProjectList</a></li>
          <li class="class"><a href="OLLMfiles.ProjectManager.html">ProjectManager</a></li>
          <li class="class"><a href="OLLMfiles.ProjectMigrate.html">ProjectMigrate</a></li>
        </ul>
      </div>
      <div class="site_content">
        <h1 class="main_title">OLLMfiles</h1>
        <hr class="main_hr"/>
        <h2 class="main_title">Description:</h2>
        <div class="description">
          <p>File and project management namespace.</p>
          <p>The OLLMfiles namespace provides file and project management functionality without GTK/git dependencies. This allows the core file system
            operations to be used in both GUI and non-GUI contexts.</p>
          <h2>Core Components </h2>
          <h3>Buffer System </h3>
          <p>The buffer system provides a unified interface for accessing file contents, whether in GUI contexts (using GTK SourceView buffers) or non
            -GUI contexts (using in-memory buffers).</p>
          <ul>
            <li>FileBuffer: Interface for file buffer operations</li>
            <li>DummyFileBuffer: In-memory buffer implementation for non-GTK contexts</li>
            <li>BufferProviderBase: Base implementation for non-GTK contexts</li>
          </ul>
          <h3>File System </h3>
          <ul>
            <li>FileBase: Base class for File and Folder objects</li>
            <li>File: Represents a file in the project</li>
            <li>Folder: Represents a folder/directory in the project</li>
            <li>FileAlias: Represents an alias/symlink to a file or folder</li>
          </ul>
          <h3>Project Management </h3>
          <ul>
            <li>ProjectManager: Manages projects, files, and folders</li>
            <li>ProjectList: Manages list of projects</li>
            <li>ProjectFiles: Manages files within a project</li>
            <li>ProjectFile: Represents a file within a project context</li>
          </ul>
          <h2>Architecture Benefits </h2>
          <ul>
            <li>Unified Interface: Same API for GTK and non-GTK contexts</li>
            <li>Type Safety: No set_data/get_data - buffers are properly typed</li>
            <li>Separation of Concerns: GUI code in liboccoder, non-GUI code in libocfiles</li>
            <li>Memory Management: Automatic cleanup of old buffers</li>
            <li>File Tracking: Automatic last_viewed timestamp updates</li>
            <li>Backup System: Automatic backups for database files</li>
          </ul>
          <h2>Usage Examples </h2>
          <h3>Reading a File </h3>
          <p><pre class="main_source"><code>file.manager.buffer_provider.create_buffer(file);<br/><span class="main_keyword">var</span> contents = <span class="main_keyword">yield</span> file.buffer.read_async();<br/><br/><span class="main_comment">// Or use convenience method</span><br/><span class="main_keyword">var</span> contents<span class="main_literal">2</span> = file.get_contents();</code></pre>
          </p>
          <h3>Reading Line Range </h3>
          <p><pre class="main_source"><code><span class="main_comment">// User provides 1-based line numbers: lines 10-20</span><br/><span class="main_basic_type">int</span> start = <span class="main_literal">10</span> - <span class="main_literal">1</span>;  <span class="main_comment">// Convert to 0-based: 9</span><br/><span class="main_basic_type">int</span> end = <span class="main_literal">20</span> - <span class="main_literal">1</span>;    <span class="main_comment">// Convert to 0-based: 19</span><br/><br/>file.manager.buffer_provider.create_buffer(file);<br/><span class="main_keyword">if</span> (!file.buffer.is_loaded) {<br/>    <span class="main_keyword">yield</span> file.buffer.read_async();<br/>}<br/><br/><span class="main_comment">// Get line range</span><br/><span class="main_keyword">var</span> snippet = file.buffer.get_text(start, end);</code></pre>
          </p>
          <h3>Writing a File </h3>
          <p><pre class="main_source"><code>file.manager.buffer_provider.create_buffer(file);<br/><span class="main_keyword">yield</span> file.buffer.write(new_contents);</code></pre>
          </p>
          <h2>Best Practices </h2>
          <ol type="1">
            <li>Create Buffer First: Call create_buffer() before using buffer methods (no null check needed)
              <p>2. Load Before Access: Ensure buffer is loaded (is_loaded == true) before using get_text() or get_line()</p>
              <p>3. Use read_async() First: Call read_async() before accessing buffer contents to ensure data is current</p>
              <p>4. Handle Errors: Always wrap buffer operations in try-catch blocks</p>
              <p>5. Convert Line Numbers: Remember to convert between 1-based (user input) and 0-based (buffer API)</p>
              <p>6. Sort Edits: When using apply_edits(), sort changes descending by start line</p>
              <p>7. Buffer Cleanup: Don't manually set file.buffer = null unless necessary (cleanup is automatic)</p></li>
          </ol>
        </div>
        <h2 class="main_title">Content:</h2>
        <h3 class="main_title">Namespaces:</h3>
        <ul class="navi_inline">
          <li class="namespace"><a href="OLLMfiles.Diff.html">Diff</a></li>
        </ul>
        <h3 class="main_title">Interfaces:</h3>
        <ul class="navi_inline">
          <li class="interface"><a href="OLLMfiles.FileBuffer.html">FileBuffer</a> - <span class="brief_description">Interface for file buffer 
              operations.</span></li>
        </ul>
        <h3 class="main_title">Classes:</h3>
        <ul class="navi_inline">
          <li class="class"><a href="OLLMfiles.BufferProviderBase.html">BufferProviderBase</a> - <span class="brief_description">Base implementation 
              for non-GTK contexts.</span></li>
          <li class="class"><a href="OLLMfiles.DummyFileBuffer.html">DummyFileBuffer</a> - <span class="brief_description">In-memory buffer 
              implementation for non-GTK contexts (tools, CLI).</span></li>
          <li class="class"><a href="OLLMfiles.File.html">File</a> - <span class="brief_description">Represents a file in the project.</span></li>
          <li class="class"><a href="OLLMfiles.FileAlias.html">FileAlias</a> - <span class="brief_description">Represents a symlink/alias to a file or
              folder.</span></li>
          <li class="abstract_class"><a href="OLLMfiles.FileBase.html">FileBase</a> - <span class="brief_description">Abstract base class providing 
              common properties and methods for files and folders.</span></li>
          <li class="class"><a href="OLLMfiles.FileChange.html">FileChange</a> - <span class="brief_description">Represents a single edit operation 
              with range and replacement.</span></li>
          <li class="class"><a href="OLLMfiles.Folder.html">Folder</a> - <span class="brief_description">Represents a directory/folder in the project.
            </span></li>
          <li class="class"><a href="OLLMfiles.FolderFiles.html">FolderFiles</a> - <span class="brief_description">Manages files and subfolders in a 
              folder (hierarchical tree structure).</span></li>
          <li class="class"><a href="OLLMfiles.GitProviderBase.html">GitProviderBase</a> - <span class="brief_description">Base class for git 
              operations with default no-op implementations.</span></li>
          <li class="class"><a href="OLLMfiles.NamespaceDoc.html">NamespaceDoc</a> - <span class="brief_description">Namespace documentation marker. 
              This file contains namespace-level documentation for OLLMfiles.</span></li>
          <li class="class"><a href="OLLMfiles.ProjectFile.html">ProjectFile</a> - <span class="brief_description">Wrapper around a File object for 
              use in project file lists.</span></li>
          <li class="class"><a href="OLLMfiles.ProjectFiles.html">ProjectFiles</a> - <span class="brief_description">Manages files in a project (flat 
              list for dropdowns/search).</span></li>
          <li class="class"><a href="OLLMfiles.ProjectList.html">ProjectList</a> - <span class="brief_description">Manages project list with 
              deduplication.</span></li>
          <li class="class"><a href="OLLMfiles.ProjectManager.html">ProjectManager</a> - <span class="brief_description">Central coordinator for all 
              file system operations.</span></li>
          <li class="class"><a href="OLLMfiles.ProjectMigrate.html">ProjectMigrate</a> - <span class="brief_description">Migrates project data from 
              existing sources (Cursor, roobuilder, VS Code).</span></li>
        </ul>
      </div>
    </div><br/>
    <div class="site_footer">Generated by <a href="https://docs.vala.dev"><kbd>valadoc</kbd></a>
    </div>
  </body>
</html>